2016年报
=======
# 非功能性
## 资源适配方面
总共使用了三套资源：PC离清质量、移动平台正常质量、移动平台低质量
### android
建议配置：android 4.4,内存2G。低于这个配置只做最大程序的可运行与体验（比如：关闭H5陀螺仪功能，滑动的动画等）
1. 采用两套不同的资源【低分辨率，高分辨率】，根据分辨率来选择加载对应的资源，以达到较优的内存占用。
1. 移除部分音效、特效
### PC
1. 采用最质量的资源。
1. 启用所有的音效与特效。
### iOS
建议配置：固件iOS9.0以上（包含）
 1. 采用移动平台正常质量的程序资源
 1. 移除部分音效、特效
 
##工程与程序架构方面
### 工程
1. 采用webpack构建工具来完成对于项目中使用的小图片进行压缩成base64合进CSS，减少请求。
   * 图片资源的base64编码进css文件会带来一定的性能消耗，需谨慎使用。
   * 将图片资源编码进js文件中，管理和预加载H5应用的图片资源，合理的合并请求可以大大提高页面体验。

1. mock server 来提供mock数据的RESTFul API，以便上线时直接切换正式API
1. mocha+karma 来实现单元测试
1. nightwatch+selenium 来实现E2E的自动化测试
### 程序
1. HTTP 资源的实时进度加载，采用XHR2.0来实现。对于不支持的浏览器，用假进度条来代替
1. 动画的方面使用CSS3的动画,使用（tranform,opacity)尽量保证不触发Layout,paint，并开启硬件加速（tranform:translateZ(0)）

  * PS:css最终表现大概分成主要的四步: recalculate style(查找计算样式)，layout(排布)，paint(绘制)，composite layers(组合层级)
  详见：https://csstriggers.com

### 主要遇到的问题与解决
#### loading 页高清资源在3G网络下载比较久、会白屏比较久。
解决：与设计沟通：出3套资源，移动平台都至多载后面两种资源，保证白屏时间短少。
#### 大事件的3D滚动效果缩放伸缩效果.在内存1G的机器下，性能表现差。
解决：与设计沟通：在低端机器下，去除大事件上的其他无关紧要的动效，并把大事件的效果降低。
#### 主会场的循环滑动，相对卡顿。
解决：原来是用两份一横一样的DOM，来循环显示。排查后发现内存吃太多了。重构主会场的程序，只采用了一份DOM（内存使用降一半）,程序根据滑动的范围来做显示与渲染。

#总结
1. 根据不同的运行平台、不同的运行设备动态分发不同的程序资源。
1. 采用H5的技术实现，动态上线与更新，99U只需要入口开启，无需升级99U。
